"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.getImportDeclaration = void 0;
const config_1 = require("../config");
const utils_1 = require("../utils");
const getImportDeclaration = (j, source, options) => {
    // Support DynamoDB.DocumentClient
    const v2ClientLocalName = options.v2ClientLocalName.split(".")[0];
    // Return global or service import declaration.
    return source.find(j.ImportDeclaration).filter((importDeclaration) => {
        const sourceValue = importDeclaration.value.source.value;
        if (sourceValue === config_1.PACKAGE_NAME &&
            importDeclaration.value.specifiers?.some((specifier) => ["ImportNamespaceSpecifier", "ImportDefaultSpecifier"].includes(specifier.type) ||
                (specifier.type === "ImportSpecifier" && specifier.local?.name === v2ClientLocalName))) {
            return true;
        }
        if (sourceValue === (0, utils_1.getClientDeepImportPath)(options.v2ClientName) &&
            importDeclaration.value.specifiers?.some((specifier) => ["ImportNamespaceSpecifier", "ImportDefaultSpecifier"].includes(specifier.type) &&
                specifier.local?.name === v2ClientLocalName)) {
            return true;
        }
        return false;
    });
};
exports.getImportDeclaration = getImportDeclaration;
