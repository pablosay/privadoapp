"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.addTsTypeQueryToRefType = void 0;
const utils_1 = require("../utils");
const nativeTsUnionTypes = ["Array", "Record"];
const addTsTypeQueryToRefType = (j, v3ClientType) => {
    const { typeParameters } = v3ClientType;
    if (typeParameters?.type === "TSTypeParameterInstantiation") {
        for (const type of typeParameters.params) {
            if (type.type === "TSTypeReference") {
                const typeRef = type;
                if (typeRef.typeName.type === "Identifier") {
                    const typeRefIdentifier = typeRef.typeName;
                    if (typeRefIdentifier.name.startsWith((0, utils_1.getDefaultLocalName)(""))) {
                        // @ts-expect-error Type 'TSTypeQuery' is not assignable
                        typeRef.typeName = j.tsTypeQuery(j.identifier(typeRefIdentifier.name));
                    }
                    else if (nativeTsUnionTypes.includes(typeRefIdentifier.name)) {
                        (0, exports.addTsTypeQueryToRefType)(j, typeRef);
                    }
                }
            }
        }
    }
};
exports.addTsTypeQueryToRefType = addTsTypeQueryToRefType;
